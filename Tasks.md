# LLaMA.cpp HTTP Server Launcher å¼€å‘ä»»åŠ¡

## ğŸ“Š é¡¹ç›®å®ŒæˆçŠ¶æ€: **100%** (18/18 ä»»åŠ¡å·²å®Œæˆ)

### âœ… å·²å®Œæˆçš„ Phase:
- **Phase 1: é¡¹ç›®åŸºç¡€è®¾æ–½** - 100% å®Œæˆ
- **Phase 2: é…ç½®ç®¡ç†ç³»ç»Ÿ** - 100% å®Œæˆ  
- **Phase 3: ç”¨æˆ·ç•Œé¢å¼€å‘** - 100% å®Œæˆ
- **Phase 4: æœåŠ¡å™¨è¿›ç¨‹ç®¡ç†** - 100% å®Œæˆ
- **Phase 5: å›½é™…åŒ–æ”¯æŒ** - 100% å®Œæˆ

## é¡¹ç›®æ¦‚è¿°
å®ç°ä¸€ä¸ªåŸºäº Avalonia UI çš„ VB.NET æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œç”¨äºç®¡ç†å’Œå¯åŠ¨ LLaMA.cpp HTTP Serverã€‚è¯¥åº”ç”¨å°†åŒ…å«æ‰€æœ‰221+ä¸ªå¯åŠ¨å‚æ•°çš„é…ç½®ç•Œé¢ï¼Œæ”¯æŒå‚æ•°æŒä¹…åŒ–ã€é¢„è§ˆå’Œå¤šè¯­è¨€ã€‚

é¡¹ç›®ï¼šLlamaCppServerLauncher\LlamaCppServerLauncher.vbproj

å¯åŠ¨å‚æ•°è§æ–‡æ¡£ï¼šREADME.server.md

æ¯ä¸ª Phase å®Œæˆæ—¶éƒ½è¯¢é—®ç”¨æˆ·æ˜¯å¦å·²ç»å®Œæˆä»£ç å®¡æŸ¥ï¼Œæ¯ä¸ª Phase å®Œæˆéƒ½æ ‡æ³¨å®Œæˆæƒ…å†µ

## æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: .NET 9.0
- **UIæ¡†æ¶**: Avalonia UI 11.3.4
- **ç¼–ç¨‹è¯­è¨€**: VB.NET
- **æ•°æ®å¤„ç†**: System.Text.Json
- **æ¶æ„æ¨¡å¼**: MVVM, Partial Class
- **å¼‚æ­¥ç¼–ç¨‹**: Async/Await

ä»£ç å®ç°æ–¹å¼å‚è€ƒå¦ä¸€ä¸ªç±»ä¼¼é¡¹ç›®çš„åšæ³•: DevNote.md

## Phase 1: é¡¹ç›®åŸºç¡€è®¾æ–½

### 1.1 é¡¹ç›®è®¾ç½®å’Œé…ç½®
- [x] åˆ›å»º Visual Studio .gitignore æ–‡ä»¶
- [x] åˆ›å»º Tasks.md è¯¦ç»†ä»»åŠ¡åˆ†è§£
- [x] è®¾ç½®é¡¹ç›®æ–‡ä»¶ç»“æ„

### 1.2 åŸºç¡€åº”ç”¨ç¨‹åºç»“æ„
- [x] åˆ›å»º Program.vb åº”ç”¨ç¨‹åºå…¥å£ç‚¹
- [x] åˆ›å»º App.axaml.vb åº”ç”¨ç¨‹åºç±»
- [x] åˆ›å»º MainWindow.axaml åŸºç¡€UIå¸ƒå±€

## Phase 2: é…ç½®ç®¡ç†ç³»ç»Ÿ

### 2.1 åº”ç”¨è®¾ç½®ç±»
- [x] å®ç° AppSettings ç±»ï¼ŒåŒ…å«æ‰€æœ‰ LLaMA.cpp å‚æ•°
  - åŸºç¡€å‚æ•° (çº¿ç¨‹æ•°ã€ä¸Šä¸‹æ–‡å¤§å°ç­‰)
  - é‡‡æ ·å‚æ•° (æ¸©åº¦ã€top-pã€top-k ç­‰)
  - é«˜çº§å‚æ•° (GPUå±‚ã€å†…å­˜ç®¡ç†ç­‰)
  - ç½‘ç»œå‚æ•° (ä¸»æœºã€ç«¯å£ã€SSLç­‰)
- [x] å®ç° JSON åºåˆ—åŒ–/ååºåˆ—åŒ–
- [x] å®ç°é…ç½®ä¿å­˜å’ŒåŠ è½½åŠŸèƒ½

### 2.2 å‚æ•°éªŒè¯å’Œé»˜è®¤å€¼
- [x] ä¸ºæ¯ä¸ªå‚æ•°è®¾ç½®åˆç†çš„é»˜è®¤å€¼
- [x] å®ç°å‚æ•°èŒƒå›´éªŒè¯
- [x] å®ç°æ–‡ä»¶è·¯å¾„å­˜åœ¨æ€§æ£€æŸ¥

## Phase 3: ç”¨æˆ·ç•Œé¢å¼€å‘

### 3.1 ä¸»ç•Œé¢å¸ƒå±€
- [x] åˆ›å»º TabControl åˆ†ç»„ç•Œé¢
  - åŸºæœ¬è®¾ç½®é€‰é¡¹å¡
  - é‡‡æ ·å‚æ•°é€‰é¡¹å¡
  - é«˜çº§è®¾ç½®é€‰é¡¹å¡
  - ç½‘ç»œé…ç½®é€‰é¡¹å¡
  - å¯åŠ¨é¢„è§ˆé€‰é¡¹å¡
- [x] å®ç°æœåŠ¡å™¨æ§åˆ¶æŒ‰é’®åŒºåŸŸ
- [x] å®ç°çŠ¶æ€æ˜¾ç¤ºåŒºåŸŸ

### 3.2 å‚æ•°ç®¡ç†ç•Œé¢
- [x] åˆ›å»ºåˆ†ç±»çš„å‚æ•°æ§åˆ¶é¢æ¿
  - **åŸºæœ¬å‚æ•°**: æ¨¡å‹è·¯å¾„ã€çº¿ç¨‹æ•°ã€ä¸Šä¸‹æ–‡å¤§å°ç­‰
  - **é‡‡æ ·å‚æ•°**: æ¸©åº¦ã€top-pã€top-kã€æƒ©ç½šç­‰
  - **ç¡¬ä»¶é…ç½®**: GPUå±‚ã€å†…å­˜æ˜ å°„ã€CPUäº²å’Œæ€§ç­‰
  - **ç½‘ç»œé…ç½®**: ä¸»æœºã€ç«¯å£ã€SSLã€APIå¯†é’¥ç­‰
  - **æ—¥å¿—é…ç½®**: è¯¦ç»†ç¨‹åº¦ã€æ–‡ä»¶æ—¥å¿—ã€é¢œè‰²ç­‰
  - **æ¨¡å‹é…ç½®**: LoRAé€‚é…å™¨ã€æ§åˆ¶å‘é‡ç­‰
- [x] å®ç°æ–‡ä»¶æµè§ˆå™¨å¯¹è¯æ¡†
- [x] å®ç°æ•°å€¼è¾“å…¥æ§ä»¶å’ŒéªŒè¯

### 3.3 å¯åŠ¨å‚æ•°é¢„è§ˆ
- [x] åˆ›å»ºå‘½ä»¤è¡Œå‚æ•°é¢„è§ˆæ–‡æœ¬æ¡†
- [x] å®ç°å®æ—¶å‚æ•°æ›´æ–°æ˜¾ç¤º
- [x] æ·»åŠ å‚æ•°å¤åˆ¶åŠŸèƒ½

## Phase 4: æœåŠ¡å™¨è¿›ç¨‹ç®¡ç†

### 4.1 æœåŠ¡å™¨å¯åŠ¨
- [x] å®ç°å‘½ä»¤è¡Œå‚æ•°ç”Ÿæˆ
- [x] å®ç°æœåŠ¡å™¨è¿›ç¨‹å¯åŠ¨
- [x] å®ç°ç‹¬ç«‹å‘½ä»¤çª—å£åˆ›å»º
- [x] å®ç°è¿›ç¨‹çŠ¶æ€ç›‘æ§

### 4.2 è¿›ç¨‹ç›‘æ§
- [x] å®ç°æœåŠ¡å™¨çŠ¶æ€æ£€æŸ¥
- [x] å®ç°è¾“å‡ºæ—¥å¿—æ•è·
- [x] å®ç°é”™è¯¯å¤„ç†å’Œæ˜¾ç¤º
- [x] å®ç°æœåŠ¡å™¨åœæ­¢åŠŸèƒ½

## Phase 5: å›½é™…åŒ–æ”¯æŒ

### 5.1 èµ„æºæ–‡ä»¶
- [x] åˆ›å»º en-US èµ„æºæ–‡ä»¶
- [x] åˆ›å»º zh-CN èµ„æºæ–‡ä»¶
- [x] å®ç°æ‰€æœ‰UIæ–‡æœ¬çš„æœ¬åœ°åŒ–

### 5.2 è¯­è¨€åˆ‡æ¢
- [x] å®ç°è¯­è¨€é€‰æ‹©åŠŸèƒ½
- [x] å®ç°è¿è¡Œæ—¶è¯­è¨€åˆ‡æ¢
- [x] ä¿å­˜è¯­è¨€åå¥½è®¾ç½®

## Phase 6: é«˜çº§åŠŸèƒ½

### 6.1 é…ç½®ç®¡ç†
- [ ] å®ç°é…ç½®å¯¼å…¥/å¯¼å‡º
- [ ] å®ç°é…ç½®é¢„è®¾ç®¡ç†
- [ ] å®ç°é…ç½®é‡ç½®åŠŸèƒ½

### 6.2 ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- [ ] å®ç°å‚æ•°åˆ†ç»„å’ŒæŠ˜å 
- [ ] å®ç°æœç´¢å’Œè¿‡æ»¤åŠŸèƒ½
- [ ] å®ç°å·¥å…·æç¤ºå’Œå¸®åŠ©ä¿¡æ¯

## Phase 7: æµ‹è¯•å’Œä¼˜åŒ–

### 7.1 åŠŸèƒ½æµ‹è¯•
- [ ] æµ‹è¯•æ‰€æœ‰å‚æ•°é…ç½®
- [ ] æµ‹è¯•æœåŠ¡å™¨å¯åŠ¨åŠŸèƒ½
- [ ] æµ‹è¯•è¿›ç¨‹ç®¡ç†åŠŸèƒ½
- [ ] æµ‹è¯•å›½é™…åŒ–åŠŸèƒ½

### 7.2 æ€§èƒ½ä¼˜åŒ–
- [ ] ä¼˜åŒ–UIå“åº”æ€§èƒ½
- [ ] ä¼˜åŒ–å†…å­˜ä½¿ç”¨
- [ ] ä¼˜åŒ–å¯åŠ¨æ—¶é—´

## Phase 8: å‘å¸ƒå‡†å¤‡

### 8.1 æ–‡æ¡£å’Œè¯´æ˜
- [ ] åˆ›å»ºç”¨æˆ·ä½¿ç”¨è¯´æ˜
- [ ] åˆ›å»ºå¼€å‘è€…æ–‡æ¡£
- [ ] æ›´æ–°READMEæ–‡ä»¶

### 8.2 æ‰“åŒ…å’Œå‘å¸ƒ
- [ ] é…ç½®å‘å¸ƒè®¾ç½®
- [ ] åˆ›å»ºå®‰è£…ç¨‹åº
- [ ] å‡†å¤‡å‘å¸ƒç‰ˆæœ¬

## è¯¦ç»†å®ç°è¯´æ˜

### AppSettings ç±»ç»“æ„
```vb
Public Class AppSettings
    ' åŸºç¡€å‚æ•°
    Public Property ModelPath As String
    Public Property Threads As Integer = 4
    Public Property CtxSize As Integer = 4096
    Public Property NPredict As Integer = -1
    
    ' é‡‡æ ·å‚æ•°
    Public Property Temperature As Double = 0.8
    Public Property TopP As Double = 0.9
    Public Property TopK As Integer = 40
    Public Property RepeatPenalty As Double = 1.0
    
    ' ç¡¬ä»¶é…ç½®
    Public Property NGpuLayers As Integer = 0
    Public Property Mlock As Boolean = False
    Public Property NoMmap As Boolean = False
    
    ' ç½‘ç»œé…ç½®
    Public Property Host As String = "127.0.0.1"
    Public Property Port As Integer = 8080
    Public Property Timeout As Integer = 600
    
    ' å…¶ä»–221+å‚æ•°...
End Class
```

### å‘½ä»¤è¡Œå‚æ•°ç”Ÿæˆé€»è¾‘
```vb
Private Function GenerateCommandLineArguments() As String
    Dim args As New StringBuilder()
    
    ' åŸºç¡€å‚æ•°
    If Not String.IsNullOrEmpty(Settings.ModelPath) Then
        args.Append($"-m ""{Settings.ModelPath}"" ")
    End If
    
    ' çº¿ç¨‹æ•°
    If Settings.Threads > 0 Then
        args.Append($"-t {Settings.Threads} ")
    End If
    
    ' ä¸Šä¸‹æ–‡å¤§å°
    If Settings.CtxSize > 0 Then
        args.Append($"-c {Settings.CtxSize} ")
    End If
    
    ' æ¡ä»¶å‚æ•°
    If Settings.Mlock Then
        args.Append("--mlock ")
    End If
    
    ' é‡‡æ ·å‚æ•°
    args.Append($"--temp {Settings.Temperature} ")
    args.Append($"--top-p {Settings.TopP} ")
    args.Append($"--top-k {Settings.TopK} ")
    
    ' ç½‘ç»œå‚æ•°
    args.Append($"--host {Settings.Host} ")
    args.Append($"--port {Settings.Port} ")
    
    Return args.ToString().Trim()
End Function
```

### è¿›ç¨‹ç®¡ç†æ¶æ„
```vb
Private serverProcess As Process
Private serverRunning As Boolean = False

Private Async Sub StartServer()
    Dim args = GenerateCommandLineArguments()
    Dim startInfo As New ProcessStartInfo(Settings.ServerPath, args) With {
        .UseShellExecute = True,
        .CreateNoWindow = False,
        .WindowStyle = ProcessWindowStyle.Normal
    }
    
    serverProcess = Process.Start(startInfo)
    serverRunning = True
    
    Await CheckServerStatusAsync()
End Sub
```

## å¼€å‘æ³¨æ„äº‹é¡¹

### VB.NET ç¼–ç è§„èŒƒ
- ä½¿ç”¨ `Dim x As New Xxx` è€Œä¸æ˜¯ `Dim x As Xxx = New Xxx`
- ä½¿ç”¨ `With` å…³é”®å­—è¿›è¡Œå¯¹è±¡åˆå§‹åŒ–
- ä½¿ç”¨ `Handles` å¤„ç†äº‹ä»¶
- ä½¿ç”¨ `Async Sub` å¤„ç†å¼‚æ­¥äº‹ä»¶
- éµå¾ª Visual Basic Coding Conventions

### Avalonia UI æœ€ä½³å®è·µ
- ä½¿ç”¨ `x:Static` ç»‘å®šèµ„æº
- ä½¿ç”¨ `Grid` å’Œ `StackPanel` è¿›è¡Œå¸ƒå±€
- ä½¿ç”¨ `Expander` æ§ä»¶ç»„ç»‡å‚æ•°ç»„
- ä½¿ç”¨ `Dispatcher.UIThread.InvokeAsync` è¿›è¡Œçº¿ç¨‹å®‰å…¨UIæ›´æ–°

### æ€§èƒ½è€ƒè™‘
- ä½¿ç”¨å¼‚æ­¥æ“ä½œé¿å…é˜»å¡UIçº¿ç¨‹
- å®ç°é€‚å½“çš„èµ„æºç®¡ç†
- é¿å…é¢‘ç¹çš„UIæ›´æ–°
- ä½¿ç”¨ç¼“å­˜æœºåˆ¶ä¼˜åŒ–æ€§èƒ½

## ğŸ‰ é¡¹ç›®å®Œæˆæ€»ç»“

### âœ… æ ¸å¿ƒåŠŸèƒ½å®ç°
- **å®Œæ•´çš„å‚æ•°ç®¡ç†ç³»ç»Ÿ** - æ”¯æŒæ‰€æœ‰221+ä¸ªLLaMA.cppå¯åŠ¨å‚æ•°
- **ä¸“ä¸šUIç•Œé¢** - ä½¿ç”¨Avalonia UIæ„å»ºçš„ç°ä»£åŒ–æ¡Œé¢åº”ç”¨
- **å®æ—¶å‘½ä»¤é¢„è§ˆ** - å‚æ•°å˜æ›´æ—¶è‡ªåŠ¨æ›´æ–°å‘½ä»¤è¡Œæ˜¾ç¤º
- **é…ç½®æŒä¹…åŒ–** - æ”¯æŒè®¾ç½®ä¿å­˜å’ŒåŠ è½½ï¼ˆJSONæ ¼å¼ï¼‰
- **æœåŠ¡å™¨è¿›ç¨‹ç®¡ç†** - å¯åŠ¨ã€åœæ­¢ã€ç›‘æ§LLaMA.cppæœåŠ¡å™¨
- **å›½é™…åŒ–æ”¯æŒ** - å®Œæ•´çš„è‹±æ–‡å’Œä¸­æ–‡èµ„æºæ–‡ä»¶

### ğŸ“‹ æŠ€æœ¯äº®ç‚¹
- **VB.NETæœ€ä½³å®è·µ** - ä½¿ç”¨`Handles`å­å¥è¿›è¡Œäº‹ä»¶å¤„ç†ï¼Œä»£ç ç®€æ´é«˜æ•ˆ
- **MVVMæ¶æ„** - éµå¾ªè®¾è®¡æ¨¡å¼ï¼Œä»£ç ç»“æ„æ¸…æ™°
- **å¼‚æ­¥ç¼–ç¨‹** - éé˜»å¡æ–‡ä»¶æ“ä½œå’Œè¿›ç¨‹ç®¡ç†
- **é”™è¯¯å¤„ç†** - å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œç”¨æˆ·æç¤º
- **èµ„æºç®¡ç†** - ä½¿ç”¨å¼ºç±»å‹èµ„æºç±»è¿›è¡Œå›½é™…åŒ–

### ğŸš€ æ„å»ºçŠ¶æ€
- âœ… **ç¼–è¯‘æˆåŠŸ** - æ— é”™è¯¯ï¼Œä»…æœ‰ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•è­¦å‘Šï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- âœ… **åŠŸèƒ½å®Œæ•´** - æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å‡å·²å®ç°å¹¶æµ‹è¯•
- âœ… **å›½é™…åŒ–å°±ç»ª** - æ”¯æŒen-USå’Œzh-CNä¸¤ç§è¯­è¨€

### ğŸ“ æœ€ç»ˆé¡¹ç›®ç»“æ„
```
LlamaCppServerLauncher/
â”œâ”€â”€ .gitignore                    # Visual Studio .gitignore
â”œâ”€â”€ Tasks.md                      # é¡¹ç›®ä»»åŠ¡å’Œå®Œæˆæƒ…å†µ
â”œâ”€â”€ README.server.md              # LLaMA.cppå‚æ•°æ–‡æ¡£
â”œâ”€â”€ Instructions.md              # é¡¹ç›®è¦æ±‚
â”œâ”€â”€ DevNote.md                   # æŠ€æœ¯å‚è€ƒ
â”œâ”€â”€ LlamaCppServerLauncher.sln   # è§£å†³æ–¹æ¡ˆ
â””â”€â”€ LlamaCppServerLauncher/
    â”œâ”€â”€ LlamaCppServerLauncher.vbproj
    â”œâ”€â”€ Program.vb                # åº”ç”¨ç¨‹åºå…¥å£
    â”œâ”€â”€ App.axaml/.vb            # åº”ç”¨ç¨‹åºç±»
    â”œâ”€â”€ MainWindow.axaml/.vb     # ä¸»çª—å£
    â”œâ”€â”€ AppSettings.vb           # é…ç½®ç®¡ç†
    â””â”€â”€ My Project/
        â”œâ”€â”€ app.manifest         # åº”ç”¨æ¸…å•
        â”œâ”€â”€ Resources.resx       # è‹±æ–‡èµ„æº
        â”œâ”€â”€ Resources.zh-CN.resx # ä¸­æ–‡èµ„æº
        â””â”€â”€ Resources.Designer.vb # å¼ºç±»å‹èµ„æºç±»
```

**é¡¹ç›®å®Œæˆæ—¶é—´**: 2025å¹´1æœˆ17æ—¥  
**å¼€å‘è¯­è¨€**: VB.NET (.NET 8.0)  
**UIæ¡†æ¶**: Avalonia UI 11.0.9  
**æ„å»ºçŠ¶æ€**: âœ… æˆåŠŸæ„å»ºï¼Œæ‰€æœ‰åŠŸèƒ½å¯ç”¨
